# –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: Jetton Wallet —Å –∫–æ–º–∏—Å—Å–∏–µ–π 6% –∏ –ª–æ—Ç–µ—Ä–µ–µ–π

## ‚úÖ –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
**–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ö–æ–º–∏—Å—Å–∏—è 6%
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–≤–æ–¥–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤–∑–∏–º–∞–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è 6%
- –ö–æ–º–∏—Å—Å–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∞–¥—Ä–µ—Å: `UQ_YOUR_COMMISSION_ADDRESS_HERE`
- –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 94% –æ—Ç —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞

### 2. –õ–æ—Ç–µ—Ä–µ—è —Å —à–∞–Ω—Å–æ–º 1/66
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–≤–æ–¥–µ –µ—Å—Ç—å —à–∞–Ω—Å 1/66 –≤—ã–∏–≥—Ä–∞—Ç—å –±–æ–Ω—É—Å +2%
- –ë–æ–Ω—É—Å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ —Å—É–º–º–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è (94% + 2% = 96%)
- –ü–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—ã–∏–≥—Ä—ã—à–µ

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—é –ª–æ—Ç–µ—Ä–µ–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–∑–º–µ—Ä–µ –±–æ–Ω—É—Å–∞

## üìä –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –û–±—ã—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ (–±–µ–∑ –≤—ã–∏–≥—Ä—ã—à–∞):
```
–ò—Å—Ö–æ–¥–Ω–∞—è —Å—É–º–º–∞: 1,000,000 —Ç–æ–∫–µ–Ω–æ–≤
–ö–æ–º–∏—Å—Å–∏—è (6%): 60,000 —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí –∞–¥—Ä–µ—Å –∫–æ–º–∏—Å—Å–∏–∏
–ü–æ–ª—É—á–∞—Ç–µ–ª—å: 940,000 —Ç–æ–∫–µ–Ω–æ–≤ (94%)
```

### –ü–µ—Ä–µ–≤–æ–¥ —Å –≤—ã–∏–≥—Ä—ã—à–µ–º –≤ –ª–æ—Ç–µ—Ä–µ–µ:
```
–ò—Å—Ö–æ–¥–Ω–∞—è —Å—É–º–º–∞: 1,000,000 —Ç–æ–∫–µ–Ω–æ–≤
–ö–æ–º–∏—Å—Å–∏—è (6%): 60,000 —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí –∞–¥—Ä–µ—Å –∫–æ–º–∏—Å—Å–∏–∏
–ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞: 940,000 —Ç–æ–∫–µ–Ω–æ–≤
–õ–æ—Ç–µ—Ä–µ–π–Ω—ã–π –±–æ–Ω—É—Å (2%): 18,800 —Ç–æ–∫–µ–Ω–æ–≤
–ü–æ–ª—É—á–∞—Ç–µ–ª—å: 958,800 —Ç–æ–∫–µ–Ω–æ–≤ (95.88%)
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–¥–µ:

1. **`commission_address()`** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –∫–æ–º–∏—Å—Å–∏–∏
2. **`random_lottery()`** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –ª–æ—Ç–µ—Ä–µ–∏ (1/66 —à–∞–Ω—Å)
3. **`send_lottery_notification()`** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—é
4. **`send_tokens()`** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å –ª–æ–≥–∏–∫–æ–π –∫–æ–º–∏—Å—Å–∏–∏ –∏ –ª–æ—Ç–µ—Ä–µ–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –û—Ç–∫–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (revert-on-errors mode)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤ –∏ —Å—É–º–º
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≥–∞–∑–∞ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `token-contract/ft/jetton-wallet.fc` - —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
- `test/lottery-test.ts` - —Ç–µ—Å—Ç—ã –ª–æ–≥–∏–∫–∏ –∫–æ–º–∏—Å—Å–∏–∏ –∏ –ª–æ—Ç–µ—Ä–µ–∏
- `LOTTERY_FEATURES.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- `COMMISSION_IMPLEMENTATION.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–∏—Å—Å–∏–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```
‚úî should calculate commission correctly
‚úî should calculate lottery bonus correctly  
‚úî should calculate total amount with lottery win
‚úî should verify lottery probability
‚úî should handle edge cases for small amounts
‚úî should verify commission address format
```

## üé≤ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ—Ç–µ—Ä–µ–∏

- **–®–∞–Ω—Å –≤—ã–∏–≥—Ä—ã—à–∞**: 1/66 (‚âà1.515%)
- **–†–∞–∑–º–µ—Ä –±–æ–Ω—É—Å–∞**: +2% –æ—Ç —Å—É–º–º—ã –ø–æ—Å–ª–µ –∫–æ–º–∏—Å—Å–∏–∏
- **–ß–∞—Å—Ç–æ—Ç–∞**: –ø—Ä–∏–º–µ—Ä–Ω–æ 1 –≤—ã–∏–≥—Ä—ã—à –Ω–∞ 66 –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –±–æ–Ω—É—Å–∞**: —Å–∏—Å—Ç–µ–º–∞ (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è)

## üí∞ –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å

### –î–æ—Ö–æ–¥—ã —Å–∏—Å—Ç–µ–º—ã:
- 6% –∫–æ–º–∏—Å—Å–∏—è —Å –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –Ω–∞ –∞–¥—Ä–µ—Å `UQ_YOUR_COMMISSION_ADDRESS_HERE` (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

### –†–∞—Å—Ö–æ–¥—ã —Å–∏—Å—Ç–µ–º—ã:
- 2% –±–æ–Ω—É—Å—ã –ø–æ–±–µ–¥–∏—Ç–µ–ª—è–º –ª–æ—Ç–µ—Ä–µ–∏ (‚âà1.515% –æ—Ç –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤)
- –ì–∞–∑ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π

### –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å:
- ‚âà4.485% –æ—Ç –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (6% - 1.515% –±–æ–Ω—É—Å–æ–≤)

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. TON Development Tools (func, fift)
2. Node.js —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ TON testnet –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

### –ö–æ–º–∞–Ω–¥—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:
```bash
cd token-contract/ft
bash compile.sh
```

### –ö–æ–º–∞–Ω–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
npx mocha test/lottery-test.ts --require ts-node/register
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–≤–µ–¥–æ–º–ª—è–π—Ç–µ –æ 6% –∫–æ–º–∏—Å—Å–∏–∏
2. **–ì–∞–∑**: –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ TON –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –≥–∞–∑–∞ –Ω–∞ 2-3 —Å–æ–æ–±—â–µ–Ω–∏—è
3. **–ê—É–¥–∏—Ç**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∞—É–¥–∏—Ç –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ testnet

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —Å—Ç–∞–≤–∫–∞ –∫–æ–º–∏—Å—Å–∏–∏
2. –û—Ç–¥–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è —Å–±–æ—Ä–∞ –∫–æ–º–∏—Å—Å–∏–∏
3. –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤
4. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ/–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã –∫–æ–º–∏—Å—Å–∏–∏
5. –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –ª–æ—Ç–µ—Ä–µ–π

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ 